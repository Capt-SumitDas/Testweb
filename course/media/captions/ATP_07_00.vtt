WEBVTT

00:00:01.258 --> 00:00:03.800
Internal Network Enumeration

00:00:05.056 --> 00:00:10.500
Before we begin enumerating the internal
network, let’s review what we already know

00:00:11.931 --> 00:00:16.633
We know that Ajla is on the external
network behind one firewall.

00:00:17.509 --> 00:00:21.733
We also know that Zora and Poultry
are behind another firewall

00:00:21.733 --> 00:00:24.950
in the internal network,
but we don’t know what the

00:00:24.950 --> 00:00:27.683
internal network looks like as a whole.

00:00:28.413 --> 00:00:30.566
To find out, we must run a scan.

00:00:32.056 --> 00:00:34.812
In order to effectively enumerate
the internal network,

00:00:34.812 --> 00:00:38.333
we must first develop a
scanning methodology.

00:00:41.605 --> 00:00:46.285
Running a full port scan is not an
effective method and as mentioned earlier,

00:00:46.285 --> 00:00:51.466
ICMP host discovery will not work
through the proxychains tunnel.

00:00:57.572 --> 00:01:03.483
Instead, we can attempt to discover
what hosts exist using the compromised

00:01:03.483 --> 00:01:08.733
Windows host and use that information
to conduct a more thorough scan.

00:01:10.515 --> 00:01:13.200
To do this, we’ll write a
quick one-liner

00:01:13.200 --> 00:01:18.166
to ping every possible host on
the network using a for loop.

00:01:18.721 --> 00:01:24.100
To iterate through a command using a range
of numbers, we can use the /L flag,

00:01:24.100 --> 00:01:29.433
which accepts a replaceable
parameter (%i in our case),

00:01:29.988 --> 00:01:37.400
and the number to iterate through in
the format of (start, step, end).

00:01:38.101 --> 00:01:41.300
Next, we will send a single
ping for each host,

00:01:42.059 --> 00:01:46.533
and set a short timeout with the -w flag.

00:01:47.263 --> 00:01:52.033
To clean up the results, we’ll redirect
the output of the ping command to null.

00:01:54.078 --> 00:01:56.900
Finally, if the ping command succeeded,

00:01:56.900 --> 00:02:00.966
we'll echo the IP to
indicate the host is up.

00:02:01.989 --> 00:02:05.733
This is executing a simple ping sweep.

00:02:06.171 --> 00:02:10.700
This means that we cannot assume the
results are complete as there may be

00:02:10.700 --> 00:02:16.000
 live hosts that are configured
to not respond to ICMP packets.

00:02:20.265 --> 00:02:24.200
Our sweep found five hosts,
including the gateway

00:02:24.200 --> 00:02:26.633
which we can ignore for the time being.

00:02:27.568 --> 00:02:31.866
The next two, 11 and 20, have
already been compromised.

00:02:32.480 --> 00:02:35.500
This leaves two more hosts of interest.

00:02:36.025 --> 00:02:39.766
We will conduct an Nmap scan
against these hosts from Kali,

00:02:39.766 --> 00:02:42.966
scanning the top 1000 ports.

00:02:52.286 --> 00:02:55.733
With the scan complete,
we can investigate our results.
