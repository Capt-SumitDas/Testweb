WEBVTT

00:00:01.200 --> 00:00:03.666
Methods of Detecting Malicious Code

00:00:04.766 --> 00:00:08.600
In order to demonstrate the effectiveness
of various antivirus products,

00:00:08.600 --> 00:00:12.566
we will start by scanning a popular
Meterpreter payload.

00:00:18.000 --> 00:00:24.400
Using msfvenom, we will generate a 
standard Portable Executable (or PE) file

00:00:24.400 --> 00:00:32.633
containing our payload, in this case a
simple TCP reverse shell saved as

00:00:32.633 --> 00:00:34.833
binary.exe.

00:00:40.966 --> 00:00:44.433
Next, we will run a virus scan on this
executable.

00:00:57.233 --> 00:01:01.666
Rather than installing a large number of
antivirus applications on our local

00:01:01.666 --> 00:01:06.133
machine, we can upload our file to 
VirusTotal,

00:01:06.133 --> 00:01:11.333
which will scan it to determine the 
detection rate of various AV products.

00:01:24.866 --> 00:01:30.100
VirusTotal is convenient, but it 
generates a hash for each unique

00:01:30.100 --> 00:01:35.066
submission that is then shared with all 
participating AV vendors.

00:01:35.733 --> 00:01:40.866
As such, take care when submitting
sensitive payloads as the hash

00:01:40.866 --> 00:01:45.366
is essentially considered public from the 
time of first submission.

00:01:49.033 --> 00:01:53.466
Based on these results, we can see that 
many antivirus products detected our

00:01:53.466 --> 00:01:55.000
file as malicious.

00:02:05.000 --> 00:02:09.033
We will transfer the file to our Windows
client for later analysis.

00:02:21.000 --> 00:02:23.733
In our terminal we set up a netcat
listener

00:02:23.733 --> 00:02:27.533
to recieve binary.exe from our
Kali client.

00:02:40.100 --> 00:02:45.400
And then with netcat we send binary.exe
to our Windows client.

00:03:00.333 --> 00:03:05.333
And binary.exe awaits analysis on our
Windows desktop.

00:03:12.733 --> 00:03:15.066
Before diving into evasion techniques,

00:03:15.066 --> 00:03:19.766
we must first understand the techniques
antivirus manufacturers use

00:03:19.766 --> 00:03:21.600
to detect malicious code.
