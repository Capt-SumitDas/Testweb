WEBVTT

00:00:01.437 --> 00:00:03.566
Situational Awareness

00:00:04.057 --> 00:00:07.700
Let’s take a look at a few modules
to see what they consist of.

00:00:07.890 --> 00:00:12.800
We'll target the dedicated Active
Directory lab environment in this section.

00:00:13.566 --> 00:00:17.533
To begin, let’s explore the
situational awareness category.

00:00:17.752 --> 00:00:21.800
While there are many methods and commands
for performing network enumeration,

00:00:21.800 --> 00:00:25.900
 the primary focus of this category
is on local client

00:00:25.900 --> 00:00:28.466
and Active Directory enumeration.

00:00:28.666 --> 00:00:32.266
For example, let’s investigate
the get_user module.

00:00:35.106 --> 00:00:37.366
We’ll issue the info command

00:00:37.366 --> 00:00:39.733
to display information about the module.

00:00:41.766 --> 00:00:44.600
First, let’s take a look at
the header section.

00:00:48.600 --> 00:00:53.033
The Name, Module, and Language fields
are self-explanatory.

00:00:54.085 --> 00:00:57.300
If the script requires local
Administrator permissions,

00:00:57.300 --> 00:01:00.800
the NeedsAdmin field will be set to “True”.

00:01:01.562 --> 00:01:05.233
If we wish to avoid leaving behind
the indicators of compromise,

00:01:05.233 --> 00:01:08.633
such as temporary disk files
or new user accounts,

00:01:08.633 --> 00:01:12.233
we set the OpsecSafe field to “True”

00:01:12.833 --> 00:01:15.033
This stealth-driven approach

00:01:15.033 --> 00:01:16.100
has a greater likelihood

00:01:16.100 --> 00:01:19.366
of evading endpoint protection mechanisms.

00:01:19.980 --> 00:01:22.900
The MinLanguageVersion field

00:01:22.900 --> 00:01:27.533
describes the minimum version of
PowerShell required to execute the script.

00:01:27.857 --> 00:01:31.166
This is especially relevant when working with Windows 7

00:01:31.166 --> 00:01:34.600
or Windows Server 2008 R2 targets

00:01:34.600 --> 00:01:37.433
as they ship with PowerShell version 2.

00:01:37.880 --> 00:01:43.100
Background tells us if the module executes
in the background without visibility

00:01:43.100 --> 00:01:44.100
for the victim,

00:01:45.000 --> 00:01:47.266
while OutputExtension

00:01:47.266 --> 00:01:49.200
tells us the output format

00:01:49.200 --> 00:01:52.066
if the module returns output to a file.

00:01:52.666 --> 00:01:55.533
Several options follow the header fields.

00:01:57.672 --> 00:02:00.633
In this particular module,
all of these are optional

00:02:00.633 --> 00:02:03.633
except Agent, which is already set.

00:02:06.789 --> 00:02:09.000
This module will work as-is,

00:02:09.000 --> 00:02:12.166
 enumerating all users in the
target Active Directory.

00:02:12.745 --> 00:02:14.900
We could set any number
of filtering options

00:02:14.900 --> 00:02:17.766
but we’ll simply run the
module with execute.

00:02:23.900 --> 00:02:27.633
In addition to the enumeration tools
in the PowerView subcategory,

00:02:27.633 --> 00:02:30.133
the situational awareness category

00:02:30.133 --> 00:02:34.433
also includes a wide variety of
network and port scanners.
