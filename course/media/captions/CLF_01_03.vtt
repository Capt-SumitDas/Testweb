WEBVTT

00:00:01.641 --> 00:00:03.241
Bash History Tricks

00:00:03.886 --> 00:00:07.453
When engaged in a penetration test, 
it’s important to keep a record of

00:00:07.453 --> 00:00:10.253
commands that have been entered
into the shell.

00:00:10.743 --> 00:00:14.643
Fortunately, Bash maintains a record
of commands that have been entered,

00:00:14.643 --> 00:00:16.976
which can be displayed with
the history command.

00:00:18.306 --> 00:00:22.373
Rather than re-typing a long command
from our history, we can make use

00:00:22.373 --> 00:00:25.006
of the history expansion facility.

00:00:25.563 --> 00:00:30.229
For example, each entry in our history
is preceeded by a line number.

00:00:30.429 --> 00:00:33.829
To re-run a command, we simply type an
exclamation mark

00:00:33.829 --> 00:00:35.563
followed by the line number,

00:00:36.023 --> 00:00:39.589
in this case we'll re-execute
the command, clear.

00:00:39.596 --> 00:00:42.496
which is identified by line
number 32.

00:00:42.819 --> 00:00:46.986
Another helpful history shortcut is
the double exclamation mark,

00:00:47.163 --> 00:00:51.996
which repeats the last command that
was executed during our terminal session:

00:00:53.519 --> 00:00:57.719
By default, the command history is saved
to the .bash_history file

00:00:57.719 --> 00:00:59.574
in the user home directory.

00:01:01.519 --> 00:01:04.853
Two environment variables control the
history size:

00:01:05.041 --> 00:01:08.441
HISTSIZE and HISTFILESIZE.

00:01:09.584 --> 00:01:14.351
HISTSIZE controls the number of commands
stored in memory for the current session,

00:01:14.351 --> 00:01:19.884
and HISTFILESIZE configures how many
commands are kept in the history file.

00:01:20.218 --> 00:01:23.551
These variables can be edited according
to our needs and saved to the

00:01:23.551 --> 00:01:25.418
Bash configuration file

00:01:25.829 --> 00:01:27.196
.bashrc

00:01:27.406 --> 00:01:29.006
that we will explore later.

00:01:29.396 --> 00:01:32.096
One of the simplest ways to explore
the Bash history

00:01:32.096 --> 00:01:34.263
is right from the command line prompt.

00:01:34.263 --> 00:01:38.063
We can browse through the history
with some useful keyboard shortcuts

00:01:38.063 --> 00:01:40.896
with the two most common being
the up arrow

00:01:40.896 --> 00:01:41.996
and down arrow.

00:01:42.486 --> 00:01:45.286
The up arrow scrolls backwards
in history…

00:01:45.286 --> 00:01:47.786
…and the down arrow scrolls forward.

00:01:48.384 --> 00:01:52.118
Last but not least, holding down Control
and pressing R

00:01:52.118 --> 00:01:55.284
will invoke the reverse-i-search facility.

00:01:55.284 --> 00:01:58.051
If we type a letter, for example, c,

00:01:58.063 --> 00:02:01.029
we’ll get a match for the most recent
command in our history

00:02:01.029 --> 00:02:02.884
that contains the letter “c”.

00:02:03.431 --> 00:02:06.164
We can keep typing to narrow down
our match and when we find

00:02:06.164 --> 00:02:09.641
the desired command, we’ll press
Enter to execute it.

00:02:09.886 --> 00:02:12.915
Bash has a number of history features
that can save a great 

00:02:12.915 --> 00:02:15.403
deal of time and repetitive typing.
